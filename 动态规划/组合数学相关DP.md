



# 经典数列

### 组合数

$问题描述：从i个物品中选j个的排列数$

$分为两种情况:$

- $选了第i个物品，则需要从前i-1个物品中选择j-1个，方案数是C(i-1,j-1)$
- $没有选第i个物品，则需要从前i-1个物品中选择j个，方案数是C(i-1,j)$

$综上C(i,j)=C(i-1,j-1)+C(i-1,j)$





### 错排数

$问题描述：将1 ... n进行排列，求每个数字都不在自己的位置上的方案数$

$分为两种情况：$

- $前n-1个位置全部错误，让n和前面n-1中任意一个位置交换，方案数为(n-1)D_{n-1}$
- $前n个位置有且仅有一个正确，则让那个没错的位置和n交换，方案数位(n-1)D_{n-2}$

$综上，总的方案数是D_n=(n-1)(D_{n-1}+D_{n-2})$



### 斯特林数

##### 第一类斯特林数



##### 第二类斯特林数



### 贝尔数



### 分拆数

##### k部分拆数

$问题描述：把正整数n分解成k个正整数（可相等）之和的方案数$

$首先这本质上是一个不定方程解的数量问题，但我们仍然推到一下递推公式$

$p(n,k)=p(n,k-1)+p(n-k,k)$

##### 互异分拆数





# 扩展问题

##### [P1057 [NOIP2008 普及组] 传球游戏](https://www.luogu.com.cn/problem/P1057)

**题目描述**

$n$个人排成圆圈，球一开始在$1$号人，每次操作拿球的人可以把求传给到相邻的两个人之一。求有多少种不同的方案，使$m$次传球以后，球在$1$号受伤

$3 \le n \le 30,1 \le m \le 30$

**解法思路**

$记f[i][j]:传了j次球，落在i手上的方案数$

$为了方便,将所有人的标号减1，答案即为f[n-1][m]$

$初始f[0][0]=1$

$转移：f[i][j]=f[(i-1) \bmod n][j-1]+f[(i+1)\bmod n][j-1]$



# 划分问题

### 背包问题求方案数



##### [P1832 A+B Problem（再升级）](https://www.luogu.com.cn/problem/P1832)

**题目描述**

给定正整数$n$，求把$n$分解为若干个素数之和的方案数

$n\le10^3$

**解法思路**

方法一：

先预处理$10^3$以内的素数；

然后问题转化为完全背包问题



方法二：

依旧是先预处理素数；

写出每个素数对应的生成函数，转化为若干生成函数求卷积问题；

可用先对每个多项式取$\ln$，以此相加再取$\exp$。





##### [P1586 四方定理](https://www.luogu.com.cn/problem/P1586)

**题目描述**

四方定理是众所周知的：任意一个正整数$n$，可以分解为不超过四个整数的平方和。

给定的正整数$n$，求它能分解的方案总数

$n\le 32768$

**解法思路**

$f[i][j]$表示$i$用$j$个平方数可以组成的方案数，答案即为$\sum_{i=1}^4f[n][i]$

转移方程$f[i][j]=\sum_{k^2<i} f[i-k^2][j-1]$



